<%= #noinspection RailsParamDefResolve
    stylesheet_link_tag 'https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' %>
<%= #noinspection RailsParamDefResolve
    stylesheet_link_tag 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css' %>
<%= stylesheet_link_tag 'datings_view' %>
<%= javascript_include_tag 'https://code.jquery.com/jquery-3.6.0.min.js' %>
<%= javascript_pack_tag 'application' %>
<%= javascript_pack_tag 'datings_view' %>

<div class="left-panel">
  <div class="user-preview">
    <p><%= @current_user.name %></p>
    <% relative_image_path = "/images/profiles/#{@current_user.id}.png" %>
    <% resource_path = File.join('images', 'profiles', "#{@current_user.id}.png") %>
    <% file_path = File.join('public', resource_path) %>
    <% puts resource_path %>
    <% puts File.exist?(file_path) %>
    <% image_path = File.exist?(file_path) ? relative_image_path : '/images/profiles/empty.png' %>
    <img src="<%= image_path %>" alt="User picture">
  </div>

  <div class="choose-panel">
    <a href="#" id="choose-profile"><%= t('dating.profile') %></a>
    <a href="#" id="choose-chats"><%= t('dating.chats') %></a>
  </div>

  <div class="profile">
    <%= form_tag(datings_update_path, :method => "get", :id => "update-profile-form") do %>
      <div>
        <%= label_tag t('dating.image') %>
        <%= file_field_tag 'profile_pic', accept: 'image/png' %>
      </div>
      <br>
      <div>
        <%= label_tag t('dating.name') %>
        <%= text_field_tag :name %>
      </div>
      <br>
      <%= submit_tag t('dating.save_changes') %>
    <% end %>
  </div>

  <div class="chats">

  </div>
</div>
